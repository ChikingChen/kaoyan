# 假设检验

构建假设后根据实测数据来推断原有的假设是否正确

## 实践场景

我们假设这样一种场景，最近你们学校组织了一场考试，你希望得知班级的平均分但是因为各种原因无法获得全班人的成绩，只能一个一个问。开始的时候，你做了一个主观的猜测——或许班级平均分是80分？然后你问了几个与自己要好的朋友，发现他们的平均分到了78分，这几个朋友成绩分布在班级里不能完全具有代表性同时你又受限于客观条件限制无法获得更多人的成绩，你就或许会觉得那么班级平均分是80分应该也差不多吧。实际上这就是一个比较典型的假设检验的应用场景。

在最早的时候我们设立了**一个命题$H_0$**以及一个相对的**命题$H_1$**，$H_0$的具体内容是班级的平均分是80分，$H_1$的具体内容则是班级的平均分不是80分，而后我们收集一些样本通过样本的计算我们能够得到一个均值发现样本的均值是78分，我们在开始的时候心中应当有个预期，如果均分算出来是75分那么班级平均分应该就是80分了但如果样本均分算出来是120分，那班级平均分就肯定不是80分，这里我们就设立了一个比较朴素的**接收域**和**拒绝域**，并且根据自己的主观判断设立了一个朴素的**显著性水平**，即如果分数超过了一个数值我们主观上会认为自己的假设错得离谱，也就是“显著”错误。

## 假设检验的相关概念

- 命题$H_0$和命题$H_1$

  $H_0$即为我们事先认定的假设而$H_1$则是相对的假设

- 显著性水平

  在主观上我们依然希望自己的假设正确，但如果收集到的样本过于夸张与我们的假设相差过大那么我们只能认为这个假设是错误的，界定是否过于夸张的界限则为显著性水平

- 拒绝域和接受域

  拒绝域已经超过了显著性水平我们认为原命题错误；接受域则表示还未超过显著性水平，那么我们依然接收这种可能性

## 两类错误

在理解了什么是显著性水平后我们就能够理解什么是两类错误

首先是与两类错误相对的是两类正确，即原本假设正确检验的结果也认为假设正确和原本假设错误检验的结果也认为假设错误，这都是正确的类型

其次是两类错误，两类错误分为第一类错误和第二类错误，第一类错误是原本假设是正确的但是我们经过检验却认为是错误的；第二类错误是原本假设是错误的但是我们经过检验却认为是正确的

从人性的角度考虑我们更加希望自己假设什么就是什么样的因此我们将显著性水平设置的比较低也就是在自己的假设错的很离谱的时候才会说自己的假设是错误的，从本质上来讲这就是减小第一类错误发生的可能增加第二类错误发生的可能
$$
第一类错误：P\{拒绝H_0|H_0成立\}\\
第二类错误：P\{接受H_0|H_0不成立\}
$$

## 显著性水平和第一类错误发生的可能性

我们现在可以有这么一种想法，无论班级的实际平均分是多少我们的样本均值可以是任何数，我们可以说班级的平均分是80分但样本的均值是40分，也可以说班级的平均分是70分而后样本的均值是120分，这都是正确的，我们无论假设班级的平均分是多少样本的均值都是随意的，只不过在一些情况下我们的假设和样本的均值差距过大，超出了显著性水平导致我们认为这个假设是错误。换句话说即使我们假设班级平均分为70分样本均值为120分我们原有的假设也有可能是正确的，但为什么我们认为这是错的，因为这超过了显著性水平。我们回顾第一类错误的定义，即为我们的假设是对的但经过检验的结果却说假设是错的，这其实与显著性水平的定义本质上相同，都是说能取到这样的样本的均值我们原来的假设真是错得离谱，我们就算是说这个样本均值是错的那这个可能性也很小。因此我们能够认为显著性水平其实就是发生第一类错误的可能性

## 例题

### 题面

设在一批圆木中随机抽取$100$根，测其小头直径，得到样本均值为$\bar X=11.2cm$，已知标准差$\sigma=2.6cm$，问在显著性检验水平$\alpha=0.05$下，该批圆木小偷平均直径能否认为是在$12cm$以上？（$\Phi(1.645)=0.95$）

### 解析

使用假设检验的方式解决问题

假设$H_0$：$\mu>\mu_0=12cm$，$H_1$：$\mu\leq\mu_0=12cm$

不等号的检验方式与等号的检验方式类似，通过检验样本是否达到了显著性水平来判断原命题是否正确

假设结束后我们得到了一个假设中的分布$U\sim N(\mu_0,\sigma^2)$，我们计算样本在假设分布中的显著性差异继而判断正误
$$
\begin{align}
U&=\frac{\bar X-\mu_0}{\sigma/\sqrt n}\sim N(0,1)\\
U&=\frac{\bar X-\mu_0}{\sigma/\sqrt n}=\frac{11.2-12}{2.6/10}=-\frac{40}{13}
\end{align}
$$
假设期望是$12$，那么均值$\bar X=11.2cm$在高斯分布中则位于$-\frac{40}{13}$

题目要求的显著性差异为$\alpha=0.05$，也就是说倘若$U$落到的位置位于两侧边缘的$0.05$以至于更加靠边，那么我们将认为$H_0$不成立而$H_1$成立，现在问题集中到了两侧边缘究竟是左侧还是右侧？在$H_1$中我们认为$\mu$相较于$\mu_0$更加小，在这种假设下我们认为$\bar X$相较于$\mu_0$更加小代表着原假设$H_0$的错误，当然我们还是允许出现一定量的误差以致在一定范围内即使$U$计算出来比$0$小那么也会认为原假设$H_0$正确，前提是不要超过显著性范围。那么如何衡量显著性范围？题目给出的分布是$N(0,1)$，如果在分布左边$\alpha=0.05$的范围内那么就可以认为已经超过了显著性范围，那么我们就认为原假设不成立。如何检验是否在左边$\alpha=0.05$范围内？直接查表高斯分布就行了。
$$
\begin{align}
\Phi(U_0)&=0.05\\
1-\Phi(U_0)&=0.95\\
\Phi(-U_0)&=0.95\\
-U_0&=1.645\\
U_0&=-1.645
\end{align}
$$
故而倘若$U\leq U_0=-1.645$那么我们就认为其达到了显著性水平因而$H_0$不成立，而$H_1$成立

### 总结

本题应该可以认为是假设检验的经典题型，通过假设$\mu=\mu_0$检验样本的显著性差异，即出现这样的样本乃至与比当前样本偏离更大的样本的可能性，如果小于一个特定的值（也就是我们说的显著性差异）那么我们认为这个假设是错误的。可以理解的是因为原假设为大于也就是说无论我们的样本计算出来均值有多大我们的假设都是正确的，因此我们只用考虑样本均值小于期望的可能性，在分布上的表现则为小于一个特定值，因此我们的任务就变成了计算这个特定值以及样本在正态分布中的值

